<%
  # Gitolite Display Access
  gitolite_user                = Setting.plugin_openproject_revisions_git[:gitolite_user]
  ssh_server_domain            = Setting.plugin_openproject_revisions_git[:ssh_server_domain]

  gitolite_global_storage_dir  = Setting.plugin_openproject_revisions_git[:gitolite_global_storage_dir]
  gitolite_storage_subdir = Setting.plugin_openproject_revisions_git[:gitolite_storage_subdir]

  https_server_domain = Setting.plugin_openproject_revisions_git[:https_server_domain]
%>

<div class="revisions_git_access_box">

  <h3><%= l(:label_current_access_patterns) %></h3>

  <span><%= raw l(:display_access_setup1) %></span>
  <br/><br/>
  <span><%= raw l(:display_access_setup2) %></span>
  <br/><br/>
  <span><%= raw l(:display_access_setup3) %></span>

  <p>
    <label><%= l(:label_default_repository) %></label>
    <br/>

    <label><%= l(:label_storage_directory) %> :</label>
    <%= raw "$HOME/#{gitolite_global_storage_dir}/#{gitolite_storage_subdir}<em>#{'project1/project2/'}project3.git</em>" %>

    <br/>

    <label><%= l(:label_ssh_access) %> :</label>
    <% gitSHP = ssh_server_domain =~ /:\d+$/ %>
    <%= raw "#{gitSHP ? 'ssh://' : ''}#{gitolite_user}@#{ssh_server_domain}#{gitSHP ? '/' : ':'}#{gitolite_storage_subdir}<em>#{'project1/project2/'}project3.git</em>" %>

    <br/>

    <label><%= l(:label_https_access) %> :</label>
    <%= raw "https://<em>redmine-user</em>@#{https_server_domain}/git/<em>#{'project1/project2/'}project3.git</em>" %>
  </p>

  <p>
    <label><%= l(:label_example_repository) %></label>
    <br/>

    <label><%= l(:label_storage_directory) %> :</label>
    <%= raw "/$HOME/#{gitolite_global_storage_dir}/#{gitolite_storage_subdir}<em>#{'project1/project2/project3/'}example.git</em>" %>

    <br/>

    <label><%= l(:label_ssh_access) %> :</label>
    <% gitSHP = ssh_server_domain =~ /:\d+$/ %>
    <%= raw "#{gitSHP ? 'ssh://' : ''}#{gitolite_user}@#{ssh_server_domain}#{gitSHP ? '/' : ':'}#{gitolite_storage_subdir}<em>#{'project1/project2/project3/'}example.git</em>" %>

    <br/>

    <label><%= l(:label_https_access) %> :</label>
    <%= raw "https://<em>redmine-user</em>@#{https_server_domain}/git/<em>#{'project1/project2/project3/'}example.git</em>" %>

    <br/>
    <br/>

    <label><%= l(:label_etcetera) %>...</label>
  </p>

  <%= raw l(:display_access_emphasis) %>

</div>
