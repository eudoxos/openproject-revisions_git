<%
  # Gitolite Global Config
  gitolite_recycle_bin_expiration_time = Setting.plugin_openproject_git_hosting[:gitolite_recycle_bin_expiration_time]

  gitolite_temp_dir    = Setting.plugin_openproject_git_hosting[:gitolite_temp_dir]
  gitolite_scripts_dir = Setting.plugin_openproject_git_hosting[:gitolite_scripts_dir]
  gitolite_timeout     = Setting.plugin_openproject_git_hosting[:gitolite_timeout]
  gitolite_log_level   = Setting.plugin_openproject_git_hosting[:gitolite_log_level]
  gitolite_log_split   = OpenProject::GitHosting::GitoliteWrapper.true?(:gitolite_log_split)
  git_config_username  = Setting.plugin_openproject_git_hosting[:git_config_username]
  git_config_email     = Setting.plugin_openproject_git_hosting[:git_config_email]
%>

<h3><%= l(:label_openproject_config) %></h3>

<p>
  <label><%= l(:label_gitolite_scripts_dir) %></label>
  <%= text_field_tag("settings[gitolite_scripts_dir]", reldir_add_dotslash(gitolite_scripts_dir), :size => 60) %>
  <br />
  <em><%= l(:label_gitolite_scripts_dir_desc) %></em>
</p>

<p>
  <label><%= l(:label_all_projects_use_git) %></label>
  <span class="bootstrap-switch switch-small" data-on="primary" data-off="default" data-on-label="<%= l(:label_yes) %>" data-off-label="<%= l(:label_no) %>">
    <%= hidden_field_tag "settings[all_projects_use_git]", "false" %>
    <% all_projects_use_git = Setting.plugin_openproject_git_hosting[:all_projects_use_git] %>
    <%= check_box_tag "settings[all_projects_use_git]", 
      all_projects_use_git, all_projects_use_git %>
  </span>
</p>

<p>
  <label><%= l(:label_init_repositories_on_create).html_safe %></label>
  <span class="bootstrap-switch switch-small" data-on="primary" data-off="default" data-on-label="<%= l(:label_yes) %>" data-off-label="<%= l(:label_no) %>">
    <%= hidden_field_tag "settings[init_repositories_on_create]", "false" %>
    <%  init_repositories_on_create = Setting.plugin_openproject_git_hosting[:init_repositories_on_create] %>
    <%= check_box_tag "settings[init_repositories_on_create]", 
      init_repositories_on_create, init_repositories_on_create, {:disabled => !all_projects_use_git} %>
  </span>
</p>

<p>
  <label><%= l(:label_delete_git_repositories).html_safe %></label>
  <span class="bootstrap-switch switch-small" data-on="primary" data-off="default" data-on-label="<%= l(:label_yes) %>" data-off-label="<%= l(:label_no) %>">
    <%= hidden_field_tag "settings[delete_git_repositories]", "false" %>
    <%  delete_git_repositories   = Setting.plugin_openproject_git_hosting[:delete_git_repositories] %>
    <%= check_box_tag "settings[delete_git_repositories]", 
      delete_git_repositories, delete_git_repositories %>
  </span>
</p>

<p>
  <label><%= l(:label_hierarchical_organisation) %></label>
  <span class="bootstrap-switch switch-small switch-extended" data-on="primary" data-off="default" data-on-label="<%= l(:label_hierarchical) %>" data-off-label="<%= l(:label_flat) %>">
    <%= hidden_field_tag "settings[hierarchical_organisation]", "false" %>
    <%  hierarchical_organisation   = Setting.plugin_openproject_git_hosting[:hierarchical_organisation] %>
    <%= check_box_tag "settings[hierarchical_organisation]", hierarchical_organisation, hierarchical_organisation %>
  </span>
</p>

<p>
  <label><%= l(:label_unique_repo_identifier) %></label>
  <span class="bootstrap-switch switch-small" data-on="primary" data-off="default" data-on-label="<%= l(:label_yes) %>" data-off-label="<%= l(:label_no) %>">
    <%= hidden_field_tag "settings[unique_repo_identifier]", "false" %>
    <%  unique_repo_identifier      = Setting.plugin_openproject_git_hosting[:unique_repo_identifier] %>
    <%= check_box_tag "settings[unique_repo_identifier]", unique_repo_identifier, unique_repo_identifier %>
  </span>
</p>

